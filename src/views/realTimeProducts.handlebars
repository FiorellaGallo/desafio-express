<div>
   
  <ol id="list" style="display: flex; flex-wrap: wrap;">
    {{#each elementos}}
    {{#if this}}
   
    <div class="card" style="width: 18rem; margin:2rem; " >
        <img src={{this.thumbnail}} class="card-img-top" alt="..." style="width: 70%" />
        <div class="card-body">
          <h5 class="card-title">{{this.title}}</h5>
          <p class="card-text">{{this.description}}</p>
          
        </div>
      </div>
      
    {{/if}}
    {{/each}}
  </ol>

  <form id="delete" action="" style="display: flex; flex-direction:row ; width: 60%; margin-left: 20%; margin-bottom:4rem;margin-top:3rem; border-radius:10rem;">
    <label for="texto">ID del producto a eliminar</label>
    <input type="text" class="form-control text-bg-tertiary p-1" id="id" name="id" />
    <button type="submit" class="btn btn-danger">Eliminar</button>
  </form>
    
  <form id="create" action="" style="display: flex; flex-direction: column ; width: 60%; margin-left: 20%;">
    <h4 style="text-align: center;">Fomulario para crear un producto</h4>
    <label for="texto">Título</label>
    <input type="text" class="form-control" id="title" name="title" />

    <label for="texto">Descripción</label>
    <input type="text" class="form-control" id="description" name="description" />

    <label for="texto">Precio</label>
    <input type="text" class="form-control" id="price" name="price" />

    <label for="texto">Imágen</label>
    <input type="text" class="form-control" id="thumbnail" name="thumbnail" />

    <label for="texto">Código</label>
    <input type="text" class="form-control" id="category" name="category" />

    <label for="texto">Categoria</label>
    <input type="text" class="form-control" id="code" name="code" />

    <label for="texto">Stock</label>
    <input type="text" class="form-control" id="stock" name="stock" />

    <button type="submit" class="btn btn-success" style="margin-bottom: 5rem;">Crear</button>
  </form>

</div>


<script src="/socket.io/socket.io.js"></script>


<script>
  const socket = io()

  const formAdd = document.getElementById('create')

  formAdd.addEventListener('submit', function (event) {
    event.preventDefault()


    const title = document.getElementById('title').value
    const description = document.getElementById('description').value
    const price = document.getElementById('price').value
    const thumbnail = document.getElementById('thumbnail').value
    const category = document.getElementById('category').value
    const code = document.getElementById('code').value
    const stock = document.getElementById('stock').value


    socket.emit('add', { title, description, price, thumbnail, category, code, stock })

  })


  const formDelete = document.getElementById('delete')

  formDelete.addEventListener('submit', function (event) {
    event.preventDefault()

    const id = document.getElementById('id').value
    console.log(id)
    socket.emit('delete', Number(id))


  })

  socket.on('newList', (data) => {
    const list = document.getElementById('list')
    let listProducts = '';

    data.map((item) => {
      if (item) listProducts += `<div class="card" style="width: 18rem; margin:2rem;"><img src=${item.thumbnail} class="card-img-top" alt="..." style="width: 70%" /><div class="card-body"><h5>Nombre: ${item.title}</h5><p>Descripción: ${item.description}</p></div></div><br>`;
    })
    list.innerHTML = listProducts;
  })

  socket.on('deleteProduct',(data)=>{
    const list = document.getElementById('list')
    let listProducts = '';

    data.map((item) => {
      if (item) listProducts += `<div class="card" style="width: 18rem; margin:2rem;"><img src=${item.thumbnail} class="card-img-top" alt="..." style="width: 70%" /><div class="card-body"><h5>Nombre: ${item.title}</h5><p>Descripción: ${item.description}</p></div></div><br>`;
    })
    list.innerHTML = listProducts;

  })

</script>